# Kubernetes

Kubernetes is an open-source container orchestration tool.

## Benefits
- **No Downtime**
- **Scalability**
- **Disaster Recovery**

## Kubernetes Components

### Pod
- Offers abstraction over containers.
- 1 application per pod.
- Smallest unit of Kubernetes.

### Service
- Provides a permanent IP address attached to each pod.

### Ingress
- Manages external access to services within a cluster.
- Provides a set of rules that allow incoming connections to reach the appropriate services.

### ConfigMap
- Stores configuration data like URLs or other services.

### Secret
- Similar to ConfigMap, used to store secret data in base64 encoded format.

### Volumes
- Attaches physical storage on a hard drive (e.g., storage on a local machine).

### Replication
- Replicate everything on multiple servers (Node 1 and Node 2).
- To create a replica, define a blueprint for the pod (specify how many pods you want).

### Deployments
- An abstraction on top of pods.

### Stateful Applications
- Specifically for applications like databases.

### Deployment Types
- **Stateless**: For applications that do not maintain state.
- **Stateful**: For databases.

## Kubernetes Architecture

### Node Components
Three processes must be installed on every node:
- **Container Runtime**
- **Kubelet**: Interacts with the container runtime and node.
- **Kube Proxy**: Forwards requests.

### Master Node
Manages processes and has four components:
- **API Server**: Acts as a cluster gateway; good for security because there is only one entry point into the cluster.
- **Scheduler**: Determines where to place the pod (e.g., on the least used node).
- **Controller Manager**: Detects cluster state changes.
- **etcd**: The cluster brain; all changes get updated in the key-value store (the actual application data is not stored in etcd).

## Minikube
- Creates a virtual box on your laptop.
- 1-node Kubernetes clusters.

### kubectl
- Command line tool for Minikube.

### Deployment
- Has the blueprints for creating a pod.
- In practice, you will rarely create the ReplicaSet directly.

## Layers of Abstraction
- **Deployment** manages a
- **ReplicaSet** which manages a
- **Pod** which is an abstraction of 
- **A Container**.

## Kubernetes YAML Structure
Three parts:
1. **Metadata** for the component.
2. **Service**
3. **Status**: Automatically generated by Kubernetes.

### Commands
- Use `kubectl apply` and `kubectl delete` to work with deployments.
- The container port from the deployment YAML and the target port from the service must match.

### ConfigMap and Secret Structure
Similar structure:
- **Kind**
- **Metadata**
- **Data**

## Kubernetes Namespaces
- A namespace is a cluster inside a cluster.

### Default Namespaces
1. **kube-system**: Do not modify.
2. **kube-public**
3. **kube-node-lease**

### Why Use Namespaces
- Used to group resources (e.g., databases, monitoring namespaces).

### Cases to Use Namespaces
1. Structure your components.
2. Avoid conflicts between teams.
3. Share services between different environments.
4. Set access and resource limits at the namespace level.
